<div *ngIf="table">
  <p-card header="Progress panel" [style]="{'margin':'0.5em'}">
    <p-table [value]="table.users" [tableStyle]="{'min-width': '25rem'}">
      <ng-template pTemplate="header">
        <tr>
          <th colspan="2" style="text-align: center">
            <ng-container *ngIf="notAllVotes(table); else allVotes">
              <p-tag severity="danger" value="Waiting for all votes"></p-tag>
            </ng-container>
            <ng-template #allVotes><p-tag severity="success" value="Got all votes!"></p-tag></ng-template>
          </th>
        </tr>
        <tr>
          <th>Player</th>
          <th>Status</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-player>
        <ng-container *ngIf="player.role == 'PLAYER'">
          <tr>
            <td>{{player.nick}}</td>
            <td>
              <ng-container *ngIf="player && player.vote; else noVote">
                <p-tag severity="success" value="Vote"></p-tag>
              </ng-container>
            </td>
          </tr>
        </ng-container>
        <ng-template #noVote>
          <p-tag severity="danger" value="No vote"></p-tag>
        </ng-template>
      </ng-template>
    </p-table>
  </p-card>
</div>
